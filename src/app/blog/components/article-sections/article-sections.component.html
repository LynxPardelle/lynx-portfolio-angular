@if (article.sections) {
  <section>
    @for (section of article.sections; track section) {
      <div class="ank ank-my-50px">
        <div
          class="text-dark w-75 mx-auto pl-3 pr-3 rounded ank ank-hmn-360px ank-bg-fullRed"
          >
          <!-- Edit/Delete Buttons -->
          @if (isEdit == true) {
            <div
              class="float-right ank ank-ms-MIN25px"
              >
              @if (editSection == '') {
                <button
                  class="btn btn-warning mr-2"
                  (click)="editSectionBtn(section._id)"
                  >
                  <svg
                    width="1em"
                    height="1em"
                    viewBox="0 0 16 16"
                    class="bi bi-pencil-square"
                    fill="currentColor"
                    xmlns="http://www.w3.org/2000/svg"
                    >
                    <path
                      d="M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456l-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"
                      />
                      <path
                        fill-rule="evenodd"
                        d="M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z"
                        />
                      </svg>
                    </button>
                  }
                  @if (editSection == section._id) {
                    <button
                      class="btn btn-warning mr-2"
                      (click)="deleteSection(section._id)"
                      >
                      <svg
                        width="1em"
                        height="1em"
                        viewBox="0 0 16 16"
                        class="bi bi-trash-fill"
                        fill="currentColor"
                        xmlns="http://www.w3.org/2000/svg"
                        >
                        <path
                          fill-rule="evenodd"
                          d="M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1H2.5zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zM8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5zm3 .5a.5.5 0 0 0-1 0v7a.5.5 0 0 0 1 0v-7z"
                          />
                        </svg>
                      </button>
                    }
                    @if (editSection == section._id) {
                      <button
                        class="btn btn-warning mr-2 font-weight-normal"
                        (click)="editSectionBtn(section._id)"
                        >
                        X
                      </button>
                    }
                  </div>
                }
                <!-- Título de la sección -->
                @if (section.title && !edits.includes('title')) {
                  <h3
                    class="d-block mx-auto text-center ank ank-text-fullYellow"
                    (click)="onClickButton('┼type┼title', section)"
                    >
                    @for (title of section.title.split('\n'); track title) {
                      <span>
                        {{ title }}
                        <br />
                      </span>
                    }
                  </h3>
                }
                @if ((!section.title || edits.includes('title')) && isEdit == true) {
                  <h3
                    class="w-100 d-block mx-auto pl-5 pr-5"
                    >
                    <button
                      class="btn btn-warning font-weight-normal float-right"
                      (click)="onClickButton('┼type┼title', section)"
                      >
                      X
                    </button>
                    <textarea
                      class="w-100 border-0 bg-transparent ank ank-text-fullYellow"
                      type="text"
                      name="title"
                      #title="ngModel"
                      [(ngModel)]="section.title"
                      placeholder="Título de la sección"
                      required
                    ></textarea>
                    <hr class="ank ank-bg-fullYellow" />
                    @if (!title.valid && title.touched) {
                      <small
                        class="font-weight-bold ank ank-text-fullYellow"
                        >
                        El título de la sección no es válido.
                      </small>
                    }
                  </h3>
                }
                <hr class="ank ank-mt-MIN15px ank-text-tlight" />
                <!-- Video de youtube de la sección -->
                @if (
                  section.ytvideo && section.ytvideo != null && section.ytvideo != ''
                  ) {
                  <div
                    class="d-block mx-auto ank ank-w-256px ank-h-144px ank-w-sm-427px ank-h-sm-240px ank-w-md-640px ank-h-md-360px"
                    >
                    <youtube-player
                      class="my-0 mx-auto"
                      videoId="{{ section.ytvideo }}"
                      SuggestedQuality="hd1080"
                      >
                    </youtube-player>
                  </div>
                }
                @if (
                  !section.ytvideo &&
                  !edits.includes('ytvideo') &&
                  isEdit == true &&
                  editSection == section._id
                  ) {
                  <button
                    class="btn btn-warning d-block mx-auto"
                    (click)="onClickButton('┼type┼ytvideo', section)"
                    >
                    Insertar un video de youtube
                  </button>
                }
                @if (
                  section.ytvideo &&
                  !edits.includes('ytvideo') &&
                  isEdit == true &&
                  editSection == section._id
                  ) {
                  <button
                    class="btn btn-warning d-block mx-auto"
                    (click)="onClickButton('┼type┼ytvideo', section)"
                    >
                    Cambiar video de youtube
                  </button>
                }
                @if (
                  edits.includes('ytvideo') &&
                  isEdit == true &&
                  editSection == section._id
                  ) {
                  <div
                    class="d-block mx-auto ank ank-wmx-500px w-75"
                    >
                    <button
                      class="btn btn-warning font-weight-normal float-right"
                      (click)="onClickButton('┼type┼ytvideo', section)"
                      >
                      X
                    </button>
                    <input
                      class="w-100 border-0 bg-transparent text-center ank ank-text-tlight"
                      type="text"
                      name="ytvideo"
                      #ytvideo="ngModel"
                      [(ngModel)]="section.ytvideo"
                      placeholder="Video de youtube (Código alfanumérico final del enlace)"
                      />
                      <hr class="ank ank-bg-tlight" />
                    </div>
                  }
                  <!-- Video Principal -->
                  @if (
                    section.principalFile &&
                    section.principalFile.file &&
                    (section.principalFile.type == 'mp4' ||
                    section.principalFile.type == 'webm')
                    ) {
                    <div
                      >
                      @if (editSection == section._id) {
                        <button
                          class="btn position-absolute ank ank-s-25px ank-mt-10px ank-z-20 ank-text-tlight ank-bc-tlight ank-bw-1px ank-bs-solid"
          (click)="
            deleteFilePrincipal(
              section.principalFile.file,
              section.principalFile._id,
              section
            )
          "
                          >
                          <svg
                            width="1em"
                            height="1em"
                            viewBox="0 0 16 16"
                            class="bi bi-trash-fill"
                            fill="currentColor"
                            xmlns="http://www.w3.org/2000/svg"
                            >
                            <path
                              fill-rule="evenodd"
                              d="M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1H2.5zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zM8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5zm3 .5a.5.5 0 0 0-1 0v7a.5.5 0 0 0 1 0v-7z"
                              />
                            </svg>
                          </button>
                        }
                        <p class="text-center mt-3 mb-2 ank ank-text-tlight">
                          {{ section.principalFile.file }}
                        </p>
                        <video
                          controls
                          class="ank ank-wmx-100per ank-hmx-360px my-0 mx-auto d-block ank-text-tlight"
                          >
                          <source
                            src="{{ apiBlog + 'get-file/' + section.principalFile.file }}"
                            type="audio/mpeg"
                            />
                            Tu navegador no soporta videos.
                          </video>
                          <br />
                        </div>
                      }
                      <!-- Audio principal -->
                      @if (
                        section.principalFile &&
                        section.principalFile.file &&
                        (section.principalFile.type == 'mp3' ||
                        section.principalFile.type == 'mpeg' ||
                        section.principalFile.type == 'wav' ||
                        section.principalFile.type == 'ogg')
                        ) {
                        <div
                          >
                          <p class="text-center mt-3 mb-2 ank ank-text-tlight">
                            {{ section.principalFile.file }}
                          </p>
                          @if (editSection == section._id) {
                            <button
                              class="btn position-absolute ank ank-s-35px ank-mt-10px ank-z-20 ank-text-tlight ank-bc-tlight ank-bw-1px ank-bs-solid"
          (click)="
            deleteFilePrincipal(
              section.principalFile.file,
              section.principalFile._id,
              section
            )
          "
                              >
                              <svg
                                width="1em"
                                height="1em"
                                viewBox="0 0 16 16"
                                class="bi bi-trash-fill"
                                fill="currentColor"
                                xmlns="http://www.w3.org/2000/svg"
                                >
                                <path
                                  fill-rule="evenodd"
                                  d="M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1H2.5zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zM8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5zm3 .5a.5.5 0 0 0-1 0v7a.5.5 0 0 0 1 0v-7z"
                                  />
                                </svg>
                              </button>
                            }
                            <audio class="d-block mx-auto ank ank-text-tlight" controls>
                              <source
                                src="{{ apiBlog + 'get-file/' + section.principalFile.file }}"
                                type="audio/mpeg"
                                />
                                Tu navegador no soporta archivos de audio.
                              </audio>
                              <br />
                            </div>
                          }
                          <!-- Download principal -->
                          @if (
                            section.principalFile &&
                            section.principalFile.file &&
                            section.principalFile.type != 'mp3' &&
                            section.principalFile.type != 'mpeg' &&
                            section.principalFile.type != 'wav' &&
                            section.principalFile.type != 'ogg' &&
                            section.principalFile.type != 'jpg' &&
                            section.principalFile.type != 'png' &&
                            section.principalFile.type != 'webp' &&
                            section.principalFile.type != 'gif' &&
                            section.principalFile.type != 'jpeg' &&
                            section.principalFile.type != 'mp4' &&
                            section.principalFile.type != 'webm'
                            ) {
                            <div
                              class="w-75 mx-auto overflow-hidden text-center pt-2 pb-1"
                              >
                              @if (editSection == section._id) {
                                <button
                                  class="btn position-absolute ank ank-e-35px mt-0 ank-z-20 ank-text-tlight ank-bc-tlight ank-bw-1px ank-bs-solid"
          (click)="
            deleteFilePrincipal(
              section.principalFile.file,
              section.principalFile._id,
              section
            )
          "
                                  >
                                  <svg
                                    width="1em"
                                    height="1em"
                                    viewBox="0 0 16 16"
                                    class="bi bi-trash-fill"
                                    fill="currentColor"
                                    xmlns="http://www.w3.org/2000/svg"
                                    >
                                    <path
                                      fill-rule="evenodd"
                                      d="M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1H2.5zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zM8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5zm3 .5a.5.5 0 0 0-1 0v7a.5.5 0 0 0 1 0v-7z"
                                      />
                                    </svg>
                                  </button>
                                }
                                <a
                                  href="{{ apiBlog + 'get-file/' + section.principalFile.file }}"
                                  class="text-center mt-3 mb-2 ank ank-text-fullyellow"
                                  target="_blank"
                                  rel="noopener noreferrer"
                                  >
                                  {{ section.principalFile.file }}
                                </a>
                                <br />
                              </div>
                            }
                            <!-- VIDEOS -->
                            @if (section.files) {
                              <div>
                                @for (file of section.files; track file; let i = $index) {
                                  <div>
                                    @if (file.type == 'mp4' || file.type == 'webm') {
                                      <div>
                                        @if (editSection == section._id) {
                                          <button
                                            class="btn position-absolute ank ank-s-25px ank-mt-10px ank-z-20 ank-bc-tlight ank-bw-1px ank-bs-solid"
                                            (click)="deleteFileMulti(file.file, file._id, section)"
                                            >
                                            <svg
                                              width="1em"
                                              height="1em"
                                              viewBox="0 0 16 16"
                                              class="bi bi-trash-fill"
                                              fill="currentColor"
                                              xmlns="http://www.w3.org/2000/svg"
                                              >
                                              <path
                                                fill-rule="evenodd"
                                                d="M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1H2.5zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zM8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5zm3 .5a.5.5 0 0 0-1 0v7a.5.5 0 0 0 1 0v-7z"
                                                />
                                              </svg>
                                            </button>
                                          }
                                          <p class="ank ank-text-tlight">
                                            {{ file.file }}
                                          </p>
                                          <video controls class="ank ank-wmx-100per ank-text-tlight">
                                            <source
                                              src="{{ apiBlog + 'get-file/' + file.file }}"
                                              type="audio/mpeg"
                                              />
                                              Tu navegador no soporta videos.
                                            </video>
                                          </div>
                                        }
                                      </div>
                                    }
                                    <br />
                                  </div>
                                }
                                <!-- IMAGES -->
                                @if (section.files && section.files.length > 1) {
                                  <div
                                    class="d-block my-0 mx-auto ank ank-w-320px"
                                    >
                                    <carousel [interval]="2000">
                                      @for (file of section.files; track file; let i = $index) {
                                        <div>
                                          @if (
                                            file.type == 'jpg' ||
                                            file.type == 'png' ||
                                            file.type == 'gif' ||
                                            file.type == 'webp' ||
                                            file.type == 'jpeg'
                                            ) {
                                            <slide
                                              >
                                              <img
                                                src="{{ apiBlog + 'get-file/' + file.file }}"
                                                alt="{{ file.file }}"
                                                (click)="lgModal.show()"
                                                title="{{ file.file }}"
                                                class="d-block mx-auto cursor-pointer ank ank-wmx-300px"
                                                />
                                                <div class="carousel-caption d-none d-md-block">
                                                  <span
                                                    class="mx-auto textSHB w-100 overflow-hidden ank ank-text-tlight"
                                                    >
                                                    {{ file.file }}
                                                  </span>
                                                </div>
                                              </slide>
                                            }
                                          </div>
                                        }
                                      </carousel>
                                      <div
                                        bsModal
                                        #lgModal="bs-modal"
                                        class="modal fade"
                                        tabindex="-1"
                                        role="dialog"
                                        aria-labelledby="dialog-sizes-name"
                                        >
                                        <div class="modal-dialog modal-lg">
                                          <div class="modal-content ank ank-bg-fullRed">
                                            <div class="modal-header ank ank-bg-fullRed">
                                              <h4
                                                id="dialog-sizes-name1"
                                                class="modal-title pull-left w-100 overflow-hidden ank ank-text-tlight"
                                                >
                                                Carrusel de imágenes
                                              </h4>
                                              <button
                                                type="button"
                                                class="close pull-right ank ank-text-tlight"
                                                aria-label="Close"
                                                (click)="lgModal.hide()"
                                                aria-label="Close"
                                                >
                                                <span aria-hidden="true">x</span>
                                              </button>
                                            </div>
                                            <div class="modal-body ank ank-bg-fullRed">
                                              <br />
                                              <carousel [interval]="2000">
                                                @for (file of section.files; track file; let i = $index) {
                                                  <div>
                                                    @if (
                                                      file.type == 'jpg' ||
                                                      file.type == 'png' ||
                                                      file.type == 'gif' ||
                                                      file.type == 'webp' ||
                                                      file.type == 'jpeg'
                                                      ) {
                                                      <slide
                                                        >
                                                        @if (editSection == section._id) {
                                                          <button
                                                            class="btn position-absolute ank ank-s-50per ank-mt-10px ank-z-20 ank-text-tlight ank-bc-tlight ank-bw-1px ank-bs-solid"
                                                            (click)="deleteFileMulti(file.file, file._id, section)"
                                                            >
                                                            <svg
                                                              width="1em"
                                                              height="1em"
                                                              viewBox="0 0 16 16"
                                                              class="bi bi-trash-fill"
                                                              fill="currentColor"
                                                              xmlns="http://www.w3.org/2000/svg"
                                                              >
                                                              <path
                                                                fill-rule="evenodd"
                                                                d="M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1H2.5zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zM8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5zm3 .5a.5.5 0 0 0-1 0v7a.5.5 0 0 0 1 0v-7z"
                                                                />
                                                              </svg>
                                                            </button>
                                                          }
                                                          <a
                                                            href="{{ apiBlog + 'get-file/' + file.file }}"
                                                            title="{{ file.file }}"
                                                            target="_blank"
                                                            rel="noopener noreferrer"
                                                            >
                                                            <img
                                                              src="{{ apiBlog + 'get-file/' + file.file }}"
                                                              alt="{{ file.file }}"
                                                              title="{{ file.file }}"
                                                              class="d-block mx-auto ank ank-wmx-100per"
                                                              />
                                                            </a>
                                                            <div class="carousel-caption d-none d-md-block">
                                                              <p
                                                                class="mx-auto textSHB w-100 overflow-hidden ank ank-text-tlight"
                                                                >
                                                                {{ file.file }}
                                                              </p>
                                                            </div>
                                                          </slide>
                                                        }
                                                      </div>
                                                    }
                                                  </carousel>
                                                  <br />
                                                </div>
                                              </div>
                                            </div>
                                          </div>
                                        </div>
                                      }
                                      <!-- Imagen principal -->
                                      @if (
                                        section.principalFile &&
                                        section.principalFile.file &&
                                        section.principalFile.file != 'null' &&
                                        (section.principalFile.type == 'jpg' ||
                                        section.principalFile.type == 'png' ||
                                        section.principalFile.type == 'webp' ||
                                        section.principalFile.type == 'gif' ||
                                        section.principalFile.type == 'jpeg')
                                        ) {
                                        <div
                                          class="float-left p-3 ank-hmx-330px ank-wmn-150px ank-wmx-50per"
                                          >
                                          @if (editSection == section._id) {
                                            <button
                                              class="btn position-absolute ank ank-e-10px ank-mb-MIN75px ank-z-20 ank-text-tlight ank-bc-tlight ank-bw-1px ank-bs-solid"
          (click)="
            deleteFilePrincipal(
              section.principalFile.file,
              section.principalFile._id,
              section
            )
          "
                                              >
                                              <svg
                                                width="1em"
                                                height="1em"
                                                viewBox="0 0 16 16"
                                                class="bi bi-trash-fill"
                                                fill="currentColor"
                                                xmlns="http://www.w3.org/2000/svg"
                                                >
                                                <path
                                                  fill-rule="evenodd"
                                                  d="M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1H2.5zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zM8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5zm3 .5a.5.5 0 0 0-1 0v7a.5.5 0 0 0 1 0v-7z"
                                                  />
                                                </svg>
                                              </button>
                                            }
                                            <img
                                              class="d-block mx-auto ank ank-hmx-300px ank-wmx-100per"
                                              src="{{ apiBlog + 'get-file/' + section.principalFile.file }}"
                                              title="{{ section.principalFile.file }}"
                                              alt="{{ section.principalFile.file }}"
                                              />
                                            </div>
                                          }
                                          <!-- Párrafo de la sección -->
                                          @if (section.p) {
                                            <div
                                              class="pt-3 px-3 ank ank-overflowX-hidden"
        [innerHTML]="
          {
            text: this.valuefy(section.text),
            textcolor: section.textColor,
            linkcolor: section.linkColor
          }
            | linkify
            | safeHtml
        "
                                          ></div>
                                        }
                                        @if (
                                          (!section.p || edits.includes('p')) &&
                                          isEdit == true &&
                                          editSection == section._id
                                          ) {
                                          <div
                                            class="pt-3 pl-3 pr-3"
                                            >
                                            <button
                                              class="btn btn-warning font-weight-normal float-right"
                                              (click)="onClickButton('┼type┼p', section)"
                                              >
                                              X
                                            </button>
                                            <textarea
                                              type="text"
                                              name="p"
                                              #p="ngModel"
                                              [(ngModel)]="section.p"
                                              placeholder="Párrafo"
                                              class="border-0 bg-transparent w-100 ank ank-text-tlight"
                                              required
                                            ></textarea>
                                            <hr class="ank ank-bg-tlight" />
                                            @if (!p.valid && p.touched) {
                                              <small
                                                class="font-weight-bold ank ank-text-tlight"
                                                >
                                                El parrafo de la sección no es válido.
                                              </small>
                                            }
                                          </div>
                                        }
                                        <!-- Files -->
                                        <div>
                                          <!-- IMG -->
                                          @if (section.files && section.files.length == 1) {
                                            <div>
                                              @for (file of section.files; track file; let i = $index) {
                                                <div>
                                                  @if (
                                                    file.type == 'jpg' ||
                                                    file.type == 'png' ||
                                                    file.type == 'gif' ||
                                                    file.type == 'webp' ||
                                                    file.type == 'jpeg'
                                                    ) {
                                                    <div
                                                      class="d-block mx-auto ank ank-wmx-100per ank-hmx-500px ank-oveflow-hidden"
                                                      >
                                                      <div>
                                                        <img
                                                          src="{{ apiBlog + 'get-file/' + file.file }}"
                                                          alt="{{ file.file }}"
                                                          title="{{ file.file }}"
                                                          (click)="lgModal.show()"
                                                          class="d-block mx-auto cursor-pointer ank ank-wmx-100per"
                                                          />
                                                          <div
                                                            bsModal
                                                            #lgModal="bs-modal"
                                                            class="modal fade"
                                                            tabindex="-1"
                                                            role="dialog"
                                                            aria-labelledby="dialog-sizes-name1"
                                                            >
                                                            <div class="modal-dialog modal-lg">
                                                              <div class="modal-content ank ank-bg-fullRed">
                                                                <div class="modal-header ank ank-bg-fullRed">
                                                                  <h4
                                                                    id="dialog-sizes-name1"
                                                                    class="modal-title pull-left w-75 overflow-hidden ank ank-text-tlight"
                                                                    >
                                                                    <span class="w-100 overflow-hidden">{{
                                                                      file.file
                                                                    }}</span>
                                                                  </h4>
                                                                  <button
                                                                    type="button"
                                                                    class="close pull-right ank ank-text-tlight"
                                                                    aria-label="Close"
                                                                    (click)="lgModal.hide()"
                                                                    aria-label="Close"
                                                                    >
                                                                    <span aria-hidden="true">x</span>
                                                                  </button>
                                                                </div>
                                                                <div class="modal-body ank ank-bg-tlight">
                                                                  <br />
                                                                  @if (editSection == section._id) {
                                                                    <button
                                                                      class="btn position-absolute ank ank-s-25px ank-mt-10px ank-z-20 ank-text-tlight ank-bc-tlight ank-bw-1px ank-bs-solid"
                          (click)="
                            deleteFileMulti(file.file, file._id, section)
                          "
                                                                      >
                                                                      <svg
                                                                        width="1em"
                                                                        height="1em"
                                                                        viewBox="0 0 16 16"
                                                                        class="bi bi-trash-fill"
                                                                        fill="currentColor"
                                                                        xmlns="http://www.w3.org/2000/svg"
                                                                        >
                                                                        <path
                                                                          fill-rule="evenodd"
                                                                          d="M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1H2.5zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zM8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5zm3 .5a.5.5 0 0 0-1 0v7a.5.5 0 0 0 1 0v-7z"
                                                                          />
                                                                        </svg>
                                                                      </button>
                                                                    }
                                                                    <a
                                                                      href="{{ apiBlog + 'get-file/' + file.file }}"
                                                                      target="_blank"
                                                                      rel="noopener noreferrer"
                                                                      class="d-block mx-auto"
                                                                      >
                                                                      <img
                                                                        src="{{ apiBlog + 'get-file/' + file.file }}"
                                                                        alt="{{ file.file }}"
                                                                        title="{{ file.file }}"
                                                                        class="d-block my-0 mx-auto ank ank-wmx-100per"
                                                                        />
                                                                      </a>
                                                                      <br />
                                                                    </div>
                                                                  </div>
                                                                </div>
                                                              </div>
                                                            </div>
                                                          </div>
                                                        }
                                                      </div>
                                                    }
                                                  </div>
                                                }
                                                <!-- DOWNLOADS -->
                                                @if (section.files && section.files.length >= 1) {
                                                  <div
                                                    class="w-75 mx-auto overflow-hidden"
                                                    >
                                                    <h5 class="ank ank-text-tlight">Descargas:</h5>
                                                    <br />
                                                    @for (file of section.files; track file; let i = $index) {
                                                      <div>
                                                        @if (editSection == section._id) {
                                                          <button
                                                            class="btn ank ank-z-20 ank-text-tlight ank-bc-tlight ank-bw-1px ank-bs-solid ank-s-35px ank-mt-10px"
                                                            (click)="deleteFileMulti(file.file, file._id, section)"
                                                            >
                                                            <svg
                                                              width="1em"
                                                              height="1em"
                                                              viewBox="0 0 16 16"
                                                              class="bi bi-trash-fill"
                                                              fill="currentColor"
                                                              xmlns="http://www.w3.org/2000/svg"
                                                              >
                                                              <path
                                                                fill-rule="evenodd"
                                                                d="M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1H2.5zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zM8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5zm3 .5a.5.5 0 0 0-1 0v7a.5.5 0 0 0 1 0v-7z"
                                                                />
                                                              </svg>
                                                            </button>
                                                          }
                                                          <a
                                                            class="ank ank-text-fullYellow"
                                                            href="{{ apiBlog + 'get-file/' + file.file }}"
                                                            target="_blank"
                                                            rel="noopener noreferrer"
                                                            >
                                                            {{ file.file }}
                                                          </a>
                                                        </div>
                                                      }
                                                      <br />
                                                    </div>
                                                  }
                                                  <!-- AUDIOS -->
                                                  @if (section.files) {
                                                    <div>
                                                      @for (file of section.files; track file; let i = $index) {
                                                        <div>
                                                          @if (
                                                            file.type == 'mp3' ||
                                                            file.type == 'mpeg' ||
                                                            file.type == 'wav' ||
                                                            file.type == 'ogg'
                                                            ) {
                                                            <div
                                                              >
                                                              <p class="ank ank-text-tlight">
                                                                {{ file.file }}
                                                              </p>
                                                              @if (editSection == section._id) {
                                                                <button
                                                                  class="btn position-absolute ank ank-s-35px ank-mt-10px ank-z-20 ank-text-tlight ank-bc-tlight ank-bw-1px ank-bs-solid"
                                                                  (click)="deleteFileMulti(file.file, file._id, section)"
                                                                  >
                                                                  <svg
                                                                    width="1em"
                                                                    height="1em"
                                                                    viewBox="0 0 16 16"
                                                                    class="bi bi-trash-fill"
                                                                    fill="currentColor"
                                                                    xmlns="http://www.w3.org/2000/svg"
                                                                    >
                                                                    <path
                                                                      fill-rule="evenodd"
                                                                      d="M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1H2.5zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zM8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5zm3 .5a.5.5 0 0 0-1 0v7a.5.5 0 0 0 1 0v-7z"
                                                                      />
                                                                    </svg>
                                                                  </button>
                                                                }
                                                                <audio controls class="d-block mx-auto ank ank-text-tlight">
                                                                  <source
                                                                    src="{{ apiBlog + 'get-file/' + file.file }}"
                                                                    type="audio/mpeg"
                                                                    />
                                                                    Tu navegador no soporta archivos de audio.
                                                                  </audio>
                                                                </div>
                                                              }
                                                            </div>
                                                          }
                                                          <br />
                                                        </div>
                                                      }
                                                      <!-- File principal Upload -->
                                                      @if (isEdit == true && editSection == section._id) {
                                                        <div>
                                                          <!-- File Upload Principal -->
                                                          <app-file-uploader
                                                            [type]="'blog'"
                                                            [typeMeta]="'one'"
                                                            [typeThingComRes]="'principal'"
                                                            [thing]="section.principalFile"
                                                            [thingInside]="true"
                                                            [id]="section._id"
                                                            (pre_loader)="pre_load($event)"
                                                            (recoverThing)="recoverThingFather($event)"
                                                          ></app-file-uploader>
                                                          <!-- END: File Upload Principal -->
                                                        </div>
                                                      }
                                                      <!-- Files Upload -->
                                                      @if (isEdit == true && editSection == section._id) {
                                                        <div>
                                                          <!-- File Upload Files -->
                                                          <app-file-uploader
                                                            [type]="'blog'"
                                                            [typeMeta]="'multi'"
                                                            [typeThingComRes]="'multi'"
                                                            [thing]="section.files"
                                                            [thingInside]="true"
                                                            [thing]="section"
                                                            [id]="section._id"
                                                            (pre_loader)="pre_load($event)"
                                                            (recoverThing)="recoverThingFather($event)"
                                                          ></app-file-uploader>
                                                          <!-- END: File Upload Files -->
                                                        </div>
                                                      }
                                                    </div>
                                                    <!-- Colors -->
                                                    @if (isEdit == true && editSection == section._id) {
                                                      <div>
                                                        <!-- Color fondo -->
                                                        <div class="d-block w-75 mx-auto pb-2 text-white">
                                                          <label
                                                            for="section.bgColor"
                                                            class="btn d-block w-100 mx-auto ank ank-text-tlight ank-bc-tlight ank-bw-1px ank-bs-solid"
                                                            >
                                                            Color del fondo de la sección
                                                            <input
                                                              type="color"
                                                              id="section.bgColor"
                                                              name="section.bgColor"
                                                              value="section.bgColor"
                                                              [(ngModel)]="section.bgColor"
                                                              />
                                                            </label>
                                                          </div>
                                                          <!-- Color texto -->
                                                          <div class="d-block w-75 mx-auto pb-2 text-white">
                                                            <label
                                                              for="section.textColor"
                                                              class="btn d-block w-100 mx-auto ank-text-tlight ank-bc-tlight ank-bw-1px ank-bs-solid"
                                                              >
                                                              Color de las letras de la sección
                                                              <input
                                                                type="color"
                                                                id="section.textColor"
                                                                name="section.textColor"
                                                                value="section.textColor"
                                                                [(ngModel)]="section.textColor"
                                                                />
                                                              </label>
                                                            </div>
                                                            <!-- Color link -->
                                                            <div class="d-block w-75 mx-auto pb-2 text-white">
                                                              <label
                                                                for="section.linkColor"
                                                                class="btn d-block w-100 mx-auto ank ank-text-tlight ank-bc-tlight ank-bw-1px ank-bs-solid"
                                                                >
                                                                Color de los links de la sección
                                                                <input
                                                                  type="color"
                                                                  id="section.linkColor"
                                                                  name="section.linkColor"
                                                                  value="section.linkColor"
                                                                  [(ngModel)]="section.linkColor"
                                                                  />
                                                                </label>
                                                              </div>
                                                              <!-- Color título -->
                                                              <div class="d-block w-75 mx-auto pb-2 text-white">
                                                                <label
                                                                  for="section.titleColor"
                                                                  class="btn d-block w-100 mx-auto ank-text-tlight ank-bc-tlight ank-bw-1px ank-bs-solid"
                                                                  >
                                                                  Color del título de la sección
                                                                  <input
                                                                    type="color"
                                                                    id="section.titleColor"
                                                                    name="section.titleColor"
                                                                    value="section.titleColor"
                                                                    [(ngModel)]="section.titleColor"
                                                                    />
                                                                  </label>
                                                                </div>
                                                              </div>
                                                            }
                                                            <br />
                                                            <!-- Edit Button -->
                                                            @if (isEdit == true && editSection == section._id) {
                                                              <div
                                                                class="mt-5 mb-5"
                                                                >
                                                                <button
                                                                  class="mx-auto d-block btn btn-warning text-center text-primary border-0"
                                                                  (click)="onSubmitSectionEdit(section)"
                                                                  >
                                                                  Editar sección
                                                                </button>
                                                              </div>
                                                            }
                                                            <br />
                                                          </div>
                                                        </div>
                                                      }
                                                    </section>
                                                  }

                                                  <!-- New section -->
                                                  @if (article._id && article._id != '' && isEdit == true) {
                                                    <section
                                                      class="w-75 mx-auto px-3 rounded ank ank-hmn-360px ank-bg-fullRed"
                                                      >
                                                      <!-- Título de la sección -->
                                                      @if (section.title && !edits.includes('title')) {
                                                        <h3
                                                          class="d-block mx-auto text-center ank ank-text-fullYellow"
                                                          (click)="onClickButton('┼type┼title', section)"
                                                          >
                                                          @for (title of section.title.split('\n'); track title) {
                                                            <span>
                                                              {{ title }}
                                                              <br />
                                                            </span>
                                                          }
                                                        </h3>
                                                      }
                                                      @if ((!section.title || edits.includes('title')) && isEdit == true) {
                                                        <h3
                                                          class="w-100 d-block mx-auto pl-5 pr-5"
                                                          >
                                                          <button
                                                            class="btn btn-warning font-weight-normal float-right"
                                                            (click)="onClickButton('┼type┼title', section)"
                                                            >
                                                            X
                                                          </button>
                                                          <textarea
                                                            class="w-100 border-0 bg-transparent ank ank-text-fullYellow"
                                                            type="text"
                                                            name="title"
                                                            #title="ngModel"
                                                            [(ngModel)]="section.title"
                                                            placeholder="Título de la sección"
                                                            (keydown.esc)="onClickButton('┼type┼title', section)"
                                                            required
                                                          ></textarea>
                                                          <hr class="ank ank-bg-fullYellow" />
                                                          @if (!title.valid && title.touched) {
                                                            <small
                                                              class="font-weight-bold ank ank-text-fullYellow"
                                                              >
                                                              El título de la sección no es válido.
                                                            </small>
                                                          }
                                                        </h3>
                                                      }
                                                      <hr class="ank ank-mt-MIN15px ank-bg-tlight" />
                                                      <!-- Párrafo de la sección -->
                                                      @if (section.text) {
                                                        <div
                                                          class="pt-3 px-3 ank ank-overflowX-hidden"
    [innerHTML]="
      {
        text: this.valuefy(section.text),
        textcolor: section.textColor,
        linkcolor: section.linkColor
      }
        | linkify
        | safeHtml
    "
                                                      ></div>
                                                    }
                                                    @if ((!section.text || edits.includes('text')) && isEdit == true) {
                                                      <div
                                                        class="pt-3 pl-3 pr-3"
                                                        >
                                                        <button
                                                          class="btn btn-warning font-weight-normal float-right"
                                                          (click)="onClickButton('┼type┼text', section)"
                                                          >
                                                          X
                                                        </button>
                                                        <textarea
                                                          class="border-0 bg-transparent w-100 ank-text-tlight"
                                                          type="text"
                                                          name="text"
                                                          #p="ngModel"
                                                          [(ngModel)]="section.text"
                                                          placeholder="Párrafo"
                                                          required
                                                        ></textarea>
                                                        <hr class="ank ank-bg-tlight" />
                                                        @if (!p.valid && p.touched) {
                                                          <small
                                                            class="font-weight-bold ank ank-text-tlight"
                                                            >
                                                            El parrafo de la sección no es válido.
                                                          </small>
                                                        }
                                                      </div>
                                                    }
                                                    <!-- Colors -->
                                                    <div>
                                                      <!-- Color fondo -->
                                                      <div class="d-block w-75 mx-auto pb-2 text-white">
                                                        <label
                                                          for="section.bgColor"
                                                          class="btn d-block w-100 mx-auto ank ank-bf-fullRed"
                                                          >
                                                          Color del fondo de la sección
                                                          <input
                                                            type="color"
                                                            id="section.bgColor"
                                                            name="section.bgColor"
                                                            value="section.bgColor"
                                                            [(ngModel)]="section.bgColor"
                                                            />
                                                          </label>
                                                        </div>
                                                        <!-- Color texto -->
                                                        <div class="d-block w-75 mx-auto pb-2 text-white">
                                                          <label
                                                            for="section.textColor"
                                                            class="btn d-block w-100 mx-auto ank ank-bf-fullRed ank-text-tlight"
                                                            >
                                                            Color de las letras de la sección
                                                            <input
                                                              type="color"
                                                              id="section.textColor"
                                                              name="section.textColor"
                                                              value="section.textColor"
                                                              [(ngModel)]="section.textColor"
                                                              />
                                                            </label>
                                                          </div>
                                                          <!-- Color link -->
                                                          <div class="d-block w-75 mx-auto pb-2 text-white">
                                                            <label
                                                              for="section.linkColor"
                                                              class="btn d-block w-100 mx-auto ank ank-bg-fullRed ank-text-tlight"
                                                              >
                                                              Color de los links de la sección
                                                              <input
                                                                type="color"
                                                                id="section.linkColor"
                                                                name="section.linkColor"
                                                                value="section.linkColor"
                                                                [(ngModel)]="section.linkColor"
                                                                />
                                                              </label>
                                                            </div>
                                                            <!-- Color título -->
                                                            <div class="d-block w-75 mx-auto pb-2 text-white">
                                                              <label
                                                                for="section.titleColor"
                                                                class="btn d-block w-100 mx-auto ank ank-bg-fullRed ank-text-tlight"
                                                                >
                                                                Color del título de la sección
                                                                <input
                                                                  type="color"
                                                                  id="section.titleColor"
                                                                  name="section.titleColor"
                                                                  value="section.titleColor"
                                                                  [(ngModel)]="section.titleColor"
                                                                  />
                                                                </label>
                                                              </div>
                                                            </div>
                                                            <br />
                                                            <!-- Create Button -->
                                                            @if (isEdit == true) {
                                                              <div class="mt-5 mb-5">
                                                                <button
                                                                  class="mx-auto d-block btn btn-warning text-center text-primary border-0"
                                                                  (click)="onSubmitSectionNew()"
                                                                  >
                                                                  Crear sección
                                                                </button>
                                                              </div>
                                                            }
                                                            <br />
                                                          </section>
                                                        }
